{"version":3,"sources":["webpack:///./src/components/login/login.vue?9097","webpack:///src/components/login/login.vue","webpack:///./src/components/login/login.vue?6a91","webpack:///./src/components/login/login.vue","webpack:///./src/api/user.js","webpack:///./src/components/login/login.vue?d0bd"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","onClickLeft","ref","onSubmit","userRules","mobile","model","value","user","callback","$$v","$set","expression","staticClass","slot","code","scopedSlots","_u","key","fn","countFinish","onVerify","_v","proxy","staticRenderFns","data","isCount","pattern","methods","$router","back","component","login","request","post","getSmsCode","get","getUser","getChannels","getAllChannels","obj","patchMyChannels","channels","method","url","delMyChannel","id","delete","goFollow","target","cancelFollow","goCollect","cancelCollect","cancelLiking","goLiking","getUserInfo","setUserInfo","userInfo","patch","setUserPhoto","formData"],"mappings":"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","file":"js/chunk-879c2d14.93ef7438.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"登录\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_c('van-form',{ref:\"loginForm\",on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"name\":\"mobile\",\"placeholder\":\"请输入手机号\",\"rules\":_vm.userRules.mobile,\"type\":\"number\",\"maxlength\":\"11\"},model:{value:(_vm.user.mobile),callback:function ($$v) {_vm.$set(_vm.user, \"mobile\", $$v)},expression:\"user.mobile\"}},[_c('i',{staticClass:\"iconfont iconshouji\",attrs:{\"slot\":\"left-icon\"},slot:\"left-icon\"})]),_c('van-field',{attrs:{\"name\":\"code\",\"placeholder\":\"验证码\",\"rules\":_vm.userRules.code,\"type\":\"number\",\"maxlength\":\"6\"},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [(_vm.isCount)?_c('van-count-down',{staticClass:\"daojishi\",attrs:{\"time\":1000 * 60,\"format\":\"ss 秒后重发\"},on:{\"finish\":_vm.countFinish}}):_c('van-button',{staticClass:\"yanzhengma\",attrs:{\"size\":\"small\",\"type\":\"primary\",\"native-type\":\"button\"},on:{\"click\":_vm.onVerify}},[_vm._v(\"发送验证码\")])]},proxy:true}]),model:{value:(_vm.user.code),callback:function ($$v) {_vm.$set(_vm.user, \"code\", $$v)},expression:\"user.code\"}},[_c('i',{staticClass:\"shuxian\",attrs:{\"slot\":\"right-icon\"},slot:\"right-icon\"}),_c('i',{staticClass:\"iconfont iconyanzhengma\",attrs:{\"slot\":\"left-icon\"},slot:\"left-icon\"})]),_c('div',{staticClass:\"login\"},[_c('van-button',{attrs:{\"block\":\"\",\"type\":\"info\",\"native-type\":\" submit\"}},[_vm._v(\" 登录 \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <van-nav-bar\r\n      title=\"登录\"\r\n      left-text=\"返回\"\r\n      @click-left=\"onClickLeft\"\r\n      left-arrow\r\n    />\r\n    <van-form @submit=\"onSubmit\" ref=\"loginForm\">\r\n      <van-field\r\n        v-model=\"user.mobile\"\r\n        name=\"mobile\"\r\n        placeholder=\"请输入手机号\"\r\n        :rules=\"userRules.mobile\"\r\n        type=\"number\"\r\n        maxlength=\"11\"\r\n      >\r\n        <i slot=\"left-icon\" class=\"iconfont iconshouji\"></i>\r\n      </van-field>\r\n      <van-field\r\n        v-model=\"user.code\"\r\n        name=\"code\"\r\n        placeholder=\"验证码\"\r\n        :rules=\"userRules.code\"\r\n        type=\"number\"\r\n        maxlength=\"6\"\r\n      >\r\n        <i slot=\"right-icon\" class=\"shuxian\"></i>\r\n        <i slot=\"left-icon\" class=\"iconfont iconyanzhengma\"></i>\r\n        <template #button>\r\n          <van-count-down\r\n            :time=\"1000 * 60\"\r\n            format=\"ss 秒后重发\"\r\n            v-if=\"isCount\"\r\n            @finish=\"countFinish\"\r\n            class=\"daojishi\"\r\n          />\r\n          <van-button\r\n            v-else\r\n            size=\"small\"\r\n            type=\"primary\"\r\n            class=\"yanzhengma\"\r\n            native-type=\"button\"\r\n            @click=\"onVerify\"\r\n            >发送验证码</van-button\r\n          >\r\n        </template>\r\n      </van-field>\r\n      <div class=\"login\">\r\n        <van-button block type=\"info\" native-type=\" submit\"> 登录 </van-button>\r\n      </div>\r\n    </van-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { login, getSmsCode } from '@/api/user'\r\nexport default {\r\n  data () {\r\n    return {\r\n      isCount: false,\r\n      user: {\r\n        mobile: '13911111111',\r\n        code: '246810'\r\n      },\r\n      userRules: {\r\n        mobile: [{ required: true, message: '请输入手机号' }, { pattern: /^1(3|4|5|6|7|8|9)\\d{9}$/, message: '请输入正确手机号' }],\r\n        code: [{ required: true, message: '请填写验证码' }, {\r\n          pattern: /\\d{6}/, message: '验证码需要6位'\r\n        }]\r\n      }\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    onClickLeft () {\r\n      this.$router.back()\r\n    },\r\n    // 倒计时结束\r\n    countFinish () {\r\n      this.isCount = false\r\n    },\r\n    // 短信验证\r\n    async onVerify () {\r\n      try { await this.$refs.loginForm.validate('mobile') } catch (e) {\r\n        return false\r\n      }\r\n      this.isCount = true\r\n      try {\r\n        await getSmsCode(this.user.mobile)\r\n      } catch (e) {\r\n        if (e.response.status === 429) {\r\n          this.$toast.fail('发送太频繁了！')\r\n        }\r\n      }\r\n    },\r\n    // 登录\r\n    async onSubmit () {\r\n      this.$toast.loading({\r\n        message: '加载中...',\r\n        forbidClick: true,\r\n        duration: 0\r\n      })\r\n      try {\r\n        const { data: res } = await login(this.user)\r\n\r\n        this.$store.commit('setToken', res.data)\r\n\r\n        this.$toast.success('登录成功！')\r\n        this.$store.commit('removeCache', 'MyLayout')\r\n        this.$router.push('/my')\r\n      } catch (err) {\r\n        if (err.response?.status === 400) return this.$toast.fail('账号或验证码出错！')\r\n        this.$toast.fail('登录失败！')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.van-field__error-message {\r\n  position: absolute;\r\n  right: 210px;\r\n  top: 0px;\r\n}\r\n// .van-cell {\r\n//   height: 91px;\r\n// }\r\n.login {\r\n  margin: 53px 28px 0 28px;\r\n  font-size: 29px;\r\n  .van-button--info {\r\n    background: #6db4fb;\r\n    border: 0.02667rem solid #56b3f5;\r\n  }\r\n}\r\n.yanzhengma,\r\n.daojishi {\r\n  background: #ededed;\r\n  border: 0;\r\n\r\n  height: 46px;\r\n  border-radius: 23px;\r\n  font-size: 22px;\r\n  color: #666666;\r\n  text-align: center;\r\n  line-height: 50px;\r\n}\r\n.shuxian {\r\n  display: block;\r\n  width: 2px;\r\n  background: #eee;\r\n  height: 46px;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 176px;\r\n}\r\n.iconfont {\r\n  margin-right: 20px;\r\n}\r\n::v-deep .van-button__text {\r\n  font-size: 22px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=00d94522&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=00d94522&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00d94522\",\n  null\n  \n)\n\nexport default component.exports","import request from '../utils/request'\r\nexport const login = (data) => request.post('/app/v1_0/authorizations', data)\r\nexport const getSmsCode = mobile => request.get(`/app/v1_0/sms/codes/${mobile}`)\r\nexport const getUser = () => request.get('/app/v1_0/user')\r\nexport const getChannels = () => request.get('/app/v1_0/user/channels')\r\n// 全部频道列表\r\nexport const getAllChannels = (obj) => request.get('/app/v1_0/channels')\r\n// 部分修改用户频道.patch('/app/v1_0/user/channels', [channel])\r\nexport const patchMyChannels = (channels) => request({\r\n  method: 'PATCH',\r\n  url: '/app/v1_0/user/channels',\r\n  data: { channels }\r\n\r\n})\r\nexport const delMyChannel = (id) => request.delete(`/app/v1_0/user/channels/${id}`)\r\n// 关注\r\nexport const goFollow = (id) => request.post('/app/v1_0/user/followings', { target: id })\r\nexport const cancelFollow = (id) => request.delete(`/app/v1_0/user/followings/${id}`)\r\n// 收藏\r\nexport const goCollect = (id) => request.post('/app/v1_0/article/collections', { target: id })\r\nexport const cancelCollect = (id) => request.delete(`/app/v1_0/article/collections/${id}`)\r\n// 点赞\r\nexport const cancelLiking = (target) => request.post('/app/v1_0/article/dislikes', { target })\r\nexport const goLiking = (target) => request.post('/app/v1_0/article/likings', { target })\r\n// 获取用户个人资料\r\nexport const getUserInfo = () => request.get('/app/v1_0/user/profile')\r\nexport const setUserInfo = userInfo => request.patch('/app/v1_0/user/profile', userInfo)\r\nexport const setUserPhoto = formData => request.patch('/app/v1_0/user/photo', formData)\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=00d94522&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=00d94522&lang=scss&scoped=true&\""],"sourceRoot":""}